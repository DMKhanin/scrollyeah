/*! Scrollyeah - v0.3.0 - 2013-04-24
* https://github.com/artpolikarpov/scrollyeah
* Copyright (c) 2013 Artem Polikarpov; Licensed MIT */
jQuery.extend({bez:function(e){var t="bez_"+$.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[t]){var a=function(e,t){var a=[null,null],n=[null,null],r=[null,null],s=function(s,o){return r[o]=3*e[o],n[o]=3*(t[o]-e[o])-r[o],a[o]=1-r[o]-n[o],s*(r[o]+s*(n[o]+s*a[o]))},o=function(e){return r[0]+e*(2*n[0]+3*a[0]*e)},i=function(e){for(var t,a=e,n=0;14>++n&&(t=s(a,0)-e,!(.001>Math.abs(t)));)a-=t/o(a);return a};return function(e){return s(i(e),1)}};jQuery.easing[t]=function(t,n,r,s,o){return s*a([e[0],e[1]],[e[2],e[3]])(n/o)+r}}return t}}),function(e){function t(t){var a=t||window.event,n=[].slice.call(arguments,1),r=0,s=0,o=0;return t=e.event.fix(a),t.type="mousewheel",t.wheelDelta&&(r=t.wheelDelta/120),t.detail&&(r=-t.detail/3),o=r,void 0!==a.axis&&a.axis===a.HORIZONTAL_AXIS&&(o=0,s=-1*r),void 0!==a.wheelDeltaY&&(o=a.wheelDeltaY/120),void 0!==a.wheelDeltaX&&(s=-1*a.wheelDeltaX/120),n.unshift(t,r,s,o),e.event.handle.apply(this,n)}var a=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=a.length;e;)this.addEventListener(a[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=a.length;e;)this.removeEventListener(a[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){function t(e){for(var t={},a=0;m.length>a;a++){var n=m[a][0],r=m[a][1];if(e){var s=e.attr("data-"+n);s&&("number"==r?(s=Number(s),isNaN(s)||(t[n]=s)):"boolean"==r?"true"==s?t[n]=!0:(s="false")&&(t[n]=!1):"string"==r&&(t[n]=s))}else t[n]=m[a][2]}return t}function a(e,t){for(var a={},n=0;g.length>n;n++)a[g[n]+e]=t;return a}function n(e){return u?a("transform","translate("+e+"px,0)"):{left:e}}function r(e){return a("transition-duration",e+"ms")}function s(t,a){function s(e,t){var a=L-(L-k)/2;return(e-a)*t.data("parallax")}function o(){return!1}function m(e){clearTimeout(e.data("backAnimate"))}function g(e,s,o,i,l){var c=isNaN(s)?0:s;m(e),i&&(c=i,e.data({backAnimate:setTimeout(function(){g(e,s,Math.max(f,o/2),!1,l)},o)})),u?(e.css(r(o)),setTimeout(function(){e.css(n(c))},1)):e.stop().animate(n(c),o,h),!l&&a.triggerScrollyeah&&(clearInterval(N),N=setInterval(function(){t.trigger("scrollyeah",x.position()[Q])},25),clearTimeout(S),S=setTimeout(function(){clearInterval(N)},o+100))}function y(e,s,o){return m(s),u?s.css(r(0)):s.stop(),e===!1&&(e=s.position()[Q]),s.css(n(e)),o?void 0:(I=e,a.triggerScrollyeah&&t.trigger("scrollyeah",I),I)}function w(e){D>C?(z=!0,t.addClass("scrollyeah_active"),a.shadows&&(t.addClass("scrollyeah_shadow"),k>=e?t.removeClass("scrollyeah_shadow_no-left").addClass("scrollyeah_shadow_no-right"):e>=L?t.removeClass("scrollyeah_shadow_no-right").addClass("scrollyeah_shadow_no-left"):t.removeClass("scrollyeah_shadow_no-left scrollyeah_shadow_no-right"))):(a.disableIfFit?(z=!1,t.removeClass("scrollyeah_active")):(z=!0,t.addClass("scrollyeah_active")),a.shadows&&t.removeClass("scrollyeah_shadow"))}function p(){D=x.width(),C=t.width(),E=t.height(),L=a.centerIfFit?Math.max((C-D)/2,0):0,k=Math.min(-(D-C),L),x.data({maxPos:L,minPos:k}),k>I&&y(k,x),I>L&&y(L,x),P.each(function(){var t=e(this);y(s(I,t),t,!0)}),w(I)}function _(r,o,u){function h(t){function a(){M=(new Date).getTime(),_=g,b=p,S=[[M,g]],T=y(!1,x),P.each(function(){var t=e(this);y(s(I,t),t,!0)}),r()}if((l||2>t.which)&&z)if(l){if(l&&1==t.targetTouches.length)g=t.targetTouches[0][F],p=t.targetTouches[0][W],a(),x[0].addEventListener("touchmove",d,!1),x[0].addEventListener("touchend",m,!1);else if(l&&t.targetTouches.length>1)return!1}else g=t[F],t.preventDefault(),a(),v.mousemove(d),v.mouseup(m)}function f(r,o,i,l){return Math.abs(i)>Math.abs(l)?(r.preventDefault(),clearTimeout(j),N||(y(!1,x),P.each(function(){var t=e(this);y(s(I,t),t,!0)}),N=!0),j=setTimeout(function(){N=!1},100),I-=Math.round(25*i),k>I&&(I=k),I>L&&(I=L),x.css(n(I)),a.triggerScrollyeah&&t.trigger("scrollyeah",I),P.each(function(){var t=e(this);t.css(n(s(I,t)))}),w(I),!1):void 0}function d(r){function i(){r.preventDefault(),D=(new Date).getTime(),S.push([D,g]);var i=_-g;I=T-i,I>L?(I=Math.round(I+(L-I)/1.5),X="left"):k>I?(I=Math.round(I+(k-I)/1.5),X="right"):X=!1,x.css(n(I)),a.triggerScrollyeah&&t.trigger("scrollyeah",I),P.each(function(){var t=e(this);t.css(n(s(I,t)))}),o(I,i,X)}l?l&&1==r.targetTouches.length&&(g=r.targetTouches[0][F],p=r.targetTouches[0][W],Q?O&&i():(Math.abs(g-_)-Math.abs(p-b)>=-5&&(O=!0,r.preventDefault()),Q=!0)):(g=r[F],i())}function m(e){if(!l||!e.targetTouches.length){O=!1,Q=!1,l?(x[0].removeEventListener("touchmove",d,!1),x[0].removeEventListener("touchend",m,!1)):(v.unbind("mouseup"),v.unbind("mousemove")),E=(new Date).getTime();var t,a,n,r,s=-I,o=E-c;for(i=0;S.length>i;i++)t=Math.abs(o-S[i][0]),0==i&&(a=t,n=E-S[i][0],r=S[i][1]),a>=t&&(a=t,n=S[i][0],r=S[i][1]);var h=r-g,f=h>=0,y=E-n,w=c>=y,p=E-A,_=f===C;u(s,y,w,p,_,h,e),A=E,C=f}}var g,p,_,b,T,M,D,C,E,j,N,S=[],A=0,O=!1,Q=!1,X=!1;l?x[0].addEventListener("touchstart",h,!1):x.mousedown(h).mousewheel(f)}function b(){}function T(a,n){clearTimeout(O),A||(A=!0,x.addClass("scrollyeah__shaft_grabbing")),Math.abs(n)>=5&&!X&&(X=!0,e("a",t).bind("click",o)),w(a)}function M(a,n,r,i,l,u){O=setTimeout(function(){X=!1,e("a",t).unbind("click",o)},c),A=!1,x.removeClass("scrollyeah__shaft_grabbing"),a=-a;var h,d=a,v=2*f;if(a>L)d=L,v/=2;else if(k>a)d=k,v/=2;else if(r){u=-u;var m=u/n;d=Math.round(a+250*m);var y=.04;d>L?(h=Math.abs(d-L),v=Math.abs(v/(250*m/(Math.abs(250*m)-h*(1-y)))),d=L,h=d+h*y):k>d&&(h=Math.abs(d-k),v=Math.abs(v/(250*m/(Math.abs(250*m)-h*(1-y)))),d=k,h=d-h*y)}I=d,d!=a&&(g(x,d,v,h,!1),P.each(function(){var t=e(this);g(t,s(d,t),v,s(h,t),!0)}),w(d))}t.data({ini:!0}).addClass(u?"scrollyeah_csstransitions":"").wrapInner('<div class="scrollyeah__wrap"><div class="scrollyeah__shaft"></div></div>'),e(".scrollyeah__wrap",t).css({width:a.maxWidth});var x=e(".scrollyeah__shaft",t);a.shadows&&e('<i class="scrollyeah__shadow scrollyeah__shadow_prev"></i><i class="scrollyeah__shadow scrollyeah__shadow_next"></i>').appendTo(t);var D,C,E,L,k,I=0,z=!0,P=e(".scrollyeah__parallax",x),j=e(".scrollyeah__disable",x);P.each(function(){var t=e(this),a=Number(t.attr("data-parallaxRate"));t.data({parallax:a})});var N,S;p(),d.bind("resize load",p),l&&window.addEventListener("orientationchange",p,!1);var A,O,Q="left",F="pageX",W="pageY",X=!1;_(b,T,M),j.bind("click mousedown mouseup mousemove",function(e){e.stopPropagation()}).css({"-webkit-user-select":"auto","-moz-user-select":"auto","-o-user-select":"auto","-ms-user-select":"auto","user-select":"auto",cursor:"auto"})}var o=function(e,t,a){function n(e,t){var a=e.charAt(0).toUpperCase()+e.substr(1),n=(e+" "+m.join(a+" ")+a).split(" ");return r(n,t)}function r(e,t){for(var n in e)if(v[e[n]]!==a)return"pfx"==t?e[n]:!0;return!1}function s(e,t){return typeof e===t}function o(e){v.cssText=e}var i,l,u,c="2.0.6",h={},f=(t.documentElement,t.head||t.getElementsByTagName("head")[0],"modernizr"),d=t.createElement(f),v=d.style,m=(Object.prototype.toString,"Webkit Moz O ms Khtml".split(" ")),g={},y=[],w={}.hasOwnProperty;u=s(w,a)||s(w.call,a)?function(e,t){return t in e&&s(e.constructor.prototype[t],a)}:function(e,t){return w.call(e,t)},g.csstransforms=function(){return!!r(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},g.csstransitions=function(){return n("transitionProperty")};for(var p in g)u(g,p)&&(l=p.toLowerCase(),h[l]=g[p](),y.push((h[l]?"":"no-")+l));return o(""),d=i=null,h._version=c,h._domPrefixes=m,h.testProp=function(e){return r([e])},h.testAllProps=n,h}(this,this.document),l="ontouchstart"in document,u=o.csstransforms&&o.csstransitions,c=300,h=e.bez([.1,0,.25,1]),f=333,d=e(window),v=e(document),m=[["maxWidth","number",999999],["shadows","boolean",!0],["disableIfFit","boolean",!0],["centerIfFit","boolean",!1],["triggerScrollyeah","boolean",!1]];e.fn.scrollyeah=function(a){"undefined"==typeof scrollyeahDefaults&&(scrollyeahDefaults={});var n=e.extend(t(),e.extend({},scrollyeahDefaults,a));return this.each(function(){var t=e(this);t.data("ini")||s(t,n)}),this},e(function(){e(".scrollyeah").each(function(){var a=e(this);a.scrollyeah(t(a))})});var g=["-webkit-","-moz-","-o-","-ms-",""]}(jQuery);